{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bienvenido","text":"<p>En este sitio puedes encontrar la documentaci\u00f3n del aplicativo Control Horario.</p> <p>El aplicativo sirve para tener un registro del horario que realiza cada trabajador dentro de una o varias empresas. Para ello, los administradores del aplicativo definen unos horarios base para cada trabajador, encima de los cuales se a\u00f1aden incidencias puntuales que modifican estos horarios base (por ejemplo, en el caso de realizar horas extras o tomarse un d\u00eda libre).</p> <p>Esta documentaci\u00f3n tiene dos partes:</p> <ul> <li>Manual para trabajadores: expone c\u00f3mo usar la vista de trabajadores.</li> <li>Manual para administradores: expone c\u00f3mo instalar y configurar el aplicativo y c\u00f3mo usar la vista de administradores.</li> </ul> <p>Se ha intentado que el aplicativo sea intuitivo y f\u00e1cil de usar en mayor parte para los trabajadores, pero tamb\u00eden para los administradores, ya que est\u00e1 hecho de tal manera que solo haga falta usar esta documentaci\u00f3n en caso de dudas ya que la mayor\u00eda de funciones complejas est\u00e1n explicadas directamente en la interfaz. Aun as\u00ed, esta documentaci\u00f3n est\u00e1 escrita lo mejor posible para ayudar a cualquier persona a usar el aplicativo.</p>"},{"location":"administradores/","title":"Introducci\u00f3n","text":"<p>En esta secci\u00f3n se explica c\u00f3mo instalar y configurar el aplicativo y c\u00f3mo usar el panel de control del administrador.</p> <p>Puedes usar las flechas que aparecen debajo del todo de cada p\u00e1gina para moverte por este manual, o usar el men\u00fa lateral.</p>"},{"location":"administradores/calendarios/","title":"Calendarios","text":"<p>El aplicativo necesita saber si un d\u00eda es laborable o no (y en caso que s\u00ed sea laborable, si es lectivo) para poder generar los registros correctamente. Esto se realiza mediante la funcionalidad de calendarios, que se encuentra dentro de la secci\u00f3n de configuraci\u00f3n.</p> <p>Calendarios por categor\u00edas</p> <p>Existe un calendario llamado calendario por defecto, que es el que se aplica para todos los trabajadores. Aun as\u00ed, como en algunas empresas se da el caso que no todos los trabajadores tienen el mismo calendario laboral, existe la posibilidad de crear calendarios que se aplican solo a una categor\u00eda en espec\u00edfico. De este modo, si un trabajador no est\u00e1 en ninguna categor\u00eda o su categor\u00eda no tiene asignado ning\u00fan calendario, el calendario que se usa es el calendario por defecto, pero si su categor\u00eda s\u00ed que tiene definido un calendario, se usa ese.</p>"},{"location":"administradores/calendarios/#como-anadir-un-calendario","title":"C\u00f3mo a\u00f1adir un calendario","text":"<ol> <li>En la secci\u00f3n de calendarios, haz clic en el bot\u00f3n add al lado del nombre de una categor\u00eda o de la secci\u00f3n calendario por defecto.</li> <li>En la pantalla que aparece, introduce la fecha de inicio del calendario que quieres definir y la fecha de fin, y haz clic en el bot\u00f3n Empezar a configurar el calendario. M\u00e1s tarde puedes a\u00f1adir m\u00e1s calendarios para ir extendiendo los d\u00edas que est\u00e1n definidos.</li> </ol> <ol> <li>Configura qu\u00e9 tipo de d\u00eda es cada d\u00eda. Estas son las posibles opciones:<ol> <li>Lectivo: d\u00eda laborable en el que hay clase.</li> <li>No lectivo: d\u00eda laborable en el que no hay clase.</li> <li>Festivo: d\u00eda en el que no se trabaja.</li> </ol> </li> <li>Haz clic en el bot\u00f3n A\u00f1adir.</li> </ol>"},{"location":"administradores/calendarios/#como-duplicar-un-calendario","title":"C\u00f3mo duplicar un calendario","text":"<p>Si quieres copiar un calendario ya existente para a\u00f1adirlo a otra categor\u00eda, sigue los siguientes pasos:</p> <ol> <li>En la secci\u00f3n de calendarios, haz clic en el bot\u00f3n code al lado del calendario que quieras copiar.</li> <li>En el di\u00e1logo que se abre, copia el c\u00f3digo de la caja de texto.</li> <li>Haz clic en el bot\u00f3n add al lado del nombre de una categor\u00eda o de la secci\u00f3n calendario por defecto.</li> <li>En la p\u00e1gina que se abre, pega el contenido que hemos copiado antes en la caja de texto de la segunda parte de la p\u00e1gina, y haz clic en Importar calendario.</li> <li>Haz los cambios necesarios al calendario, y haz clic en el bot\u00f3n A\u00f1adir.</li> </ol>"},{"location":"administradores/exportar-registro/","title":"Exportar registro","text":"<p>La informaci\u00f3n sobre esta herramienta est\u00e1 diponible en este art\u00edculo del manual de trabajadores, ya que la herramienta es pr\u00e1cticamente la misma en la vista de trabajadores y de administradores, con las siguientes excepciones:</p> <ul> <li>Los administradores pueden seleccionar para qu\u00e9 trabajadores quieren exportar el PDF.</li> <li>Los administradores tienen la opci\u00f3n de PDFs de \"ignorar los trabajadores que no tengan ning\u00fan registro ni incidencia\".</li> <li>Los administradores tienen un formato de exportaci\u00f3n adicional llamado \"PDF detallado\" que es id\u00e9ntico al formato \"PDF con horario laboral\" pero que incluye tambi\u00e9n un resumen con la suma agregada de horas por incidencia y la suma total de horas trabajadas en el periodo seleccionado.</li> </ul>"},{"location":"administradores/horarios/","title":"Horarios base","text":"<p>Para poder controlar las horas que trabaja cada d\u00eda un trabajador, se parte de los horarios base de cada trabajador. Los horarios base son los horarios que definen qu\u00e9 horas deber\u00eda trabajar cada trabajador un d\u00eda normal.</p>"},{"location":"administradores/horarios/#caracteristicas-de-un-horario-base","title":"Caracter\u00edsticas de un horario base","text":"<p>Un horario base es un conjunto de horarios diarios para cada d\u00eda de la semana, pudiendo configurar un horario diario espec\u00edfico para d\u00edas lectivos y otro para d\u00edas no lectivos, que definen cu\u00e1ndo trabaja un trabajador y, opcionalmente, tambi\u00e9n cu\u00e1ndo ocurren los descansos del desayuno y la comida.</p> <p>Tienen definida una fecha de inicio de validez y una de fin, y tambi\u00e9n se puede definir si est\u00e1n activos o no. Los horarios base tienen efecto si se est\u00e1 dentro de su periodo de validez y est\u00e1n configurados como activos, en caso contrario no tienen ning\u00fan efecto en el aplicativo.</p> <p>Nota</p> <p>Aunque en la captura de pantalla no aparezcan ni el s\u00e1bado ni el domingo en el horario, es posible definir horarios para estos d\u00edas, aunque por defecto est\u00e1n ocultos si no hay ning\u00fan horario configurado.</p>"},{"location":"administradores/horarios/#como-definir-los-horarios-base","title":"C\u00f3mo definir los horarios base","text":"<p>Existen varias maneras de definir los horarios base: se puede crear una plantilla de horario y despu\u00e9s copiarla a m\u00faltiples trabajadores a la vez (que es \u00fatil cuando muchos trabajadores comparten el mismo horario), o a\u00f1adir horarios base manualmente a cada trabajador.</p>"},{"location":"administradores/horarios/#anadir-horarios-base-mediante-plantillas","title":"A\u00f1adir horarios base mediante plantillas","text":"<ol> <li>Desde el men\u00fa lateral, accede a la secci\u00f3n Trabajadores.</li> <li>En esa p\u00e1gina, haz clic en el bot\u00f3n superior derecho llamado Administrar plantillas.</li> <li>En la p\u00e1gina que aparece, puedes acceder a las plantillas ya creadas o a\u00f1adir una nueva con el bot\u00f3n add.</li> <li>Despu\u00e9s de crear una plantilla, accede a la secci\u00f3n Trabajadores de nuevo.</li> <li>En esa secci\u00f3n, selecciona los trabajadores a los cuales quieras copiar la plantilla que has creado.</li> <li>Haz clic en el bot\u00f3n add_alarm de la barra que aparece encima del listado de trabajadores.</li> <li>Selecciona la plantilla que quieras copiar, y establece si las copias se definir\u00e1n como activas o no.</li> <li>Haz clic en el bot\u00f3n Copiar. Se abrir\u00e1 una p\u00e1gina con el resultado de la copia y si ha habido alg\u00fan error.</li> </ol>"},{"location":"administradores/horarios/#anadir-horarios-base-manualmente","title":"A\u00f1adir horarios base manualmente","text":"<ol> <li>Desde el men\u00fa lateral, accede a la secci\u00f3n Trabajadores.</li> <li>All\u00ed, haz clic en el bot\u00f3n timelapse al lado del trabajador al que quieras a\u00f1adir un horario base.</li> <li>En el caso que el trabajador ya tuviera un horario activo en la fecha actual, se abrir\u00e1 ese horario directamente. As\u00ed pues, har\u00eda falta hacer clic tami\u00e9n en el bot\u00f3n Administrar los horarios de la parte superior derecha de la pantalla.</li> <li>Haz clic en el bot\u00f3n add de la parte inferior derecha de la pantalla.</li> </ol>"},{"location":"administradores/horarios/#modificar-un-horario-base","title":"Modificar un horario base","text":""},{"location":"administradores/horarios/#cambiar-periodo-de-validez","title":"Cambiar periodo de validez","text":"<p>Para cambiar el periodo de validez, haz clic en el men\u00fa more_vert y selecciona Editar detalles.</p>"},{"location":"administradores/horarios/#activar-o-desactivar-el-horario-base","title":"Activar o desactivar el horario base","text":"<p>Haz clic en el bot\u00f3n Activar/Desactivar que aparece en la parte superior del horario base.</p>"},{"location":"administradores/horarios/#modificareliminar-el-horario-de-un-dia-en-concreto","title":"Modificar/eliminar el horario de un d\u00eda en concreto","text":"<p>Pon tu rat\u00f3n encima del cuadro verde titulado Trabajo y haz clic en el bot\u00f3n edit o delete para modificarlo o eliminarlo respectivamente.</p> <p>Para dispositivos t\u00e1ctiles</p> <p>Si est\u00e1s en un dispositivo t\u00e1ctil, puedes hacer clic en el men\u00fa more_vert y seleccionar Versi\u00f3n en texto plano para poder ver los botones para editar o eliminar horarios diarios.</p>"},{"location":"administradores/horarios/#como-ver-rapidamente-si-un-trabajador-tiene-definido-un-horario-base","title":"C\u00f3mo ver r\u00e1pidamente si un trabajador tiene definido un horario base","text":"<p>En el listado de trabajadores, al lado de cada trabajador, el icono timelapse est\u00e1 coloreado de varios colores, dependiendo de si el trabajador tiene un horario base o no. Adem\u00e1s, tambi\u00e9n puedes filtrar los trabajadores seg\u00fan tengan definido un horario base o no. Esto es lo que significan los diferentes colores:</p> <ul> <li>timelapse: no existe ning\u00fan horario base activo en el d\u00eda de hoy.</li> <li>timelapse: existe un horario base activo en el d\u00eda de hoy, pero solo se ha configurado el horario para d\u00edas lectivos o para d\u00edas no lectivos, pero no ambos.</li> <li>timelapse: existe un horario base activo en el d\u00eda de hoy configurado por completo.</li> </ul>"},{"location":"administradores/incidencias/","title":"Incidencias","text":"<p>Las incidencias son elementos que se sobreponen a los horarios base de los trabajadores para acabar de concretar qu\u00e9 horario exacto ha seguido un trabajador un d\u00eda en espec\u00edfico.</p>"},{"location":"administradores/incidencias/#tipos-de-incidencia","title":"Tipos de incidencia","text":"<p>Cada incidencia es de un tipo diferente. Por ejemplo, una incidencia puede consistir de una baja m\u00e9dica, trabajar horas extras o asistir a una formaci\u00f3n. Todas estas incidencias se deben tratar de manera diferente, puesto que, por ejemplo, unas implican que el trabajador est\u00e1 presente en el espacio de trabajo y otras implican que est\u00e1 ausente, entre otras cosas. Es por ello que los administradores deben configurar varios tipos de incidencias con las repercusiones espec\u00edficas que tienen cada una. Una vez hecho esto, al crear una incidencia se deber\u00e1 escoger un tipo, y esto junto a la configuraci\u00f3n de ese tipo determinar\u00e1 c\u00f3mo tratar\u00e1 el aplicativo dicha incidencia.</p> <p>Los tipos de incidencia se pueden configurar desde la secci\u00f3n Configuraci\u00f3n.</p>"},{"location":"administradores/incidencias/#opciones-para-los-tipos-de-incidencia","title":"Opciones para los tipos de incidencia","text":"<p>Cada tipo de incidencia tiene configuradas las siguientes opciones:</p> <ul> <li>Presente (business): Indica si el trabajador est\u00e1 f\u00edsicamente presente en el espacio de trabajo durante la incidencia. Si est\u00e1 activada, las incidencias de este tipo cuentan como horas positivas en el recuento de horas que aparece en los PDF que se exportan, y en caso de estar desactivada cuentan como horas negativas.</li> <li>Remunerada (euro_symbol): Indica si el trabajador es remunerado las horas que dura la incidencia. No tiene ning\u00fan efecto en el aplicativo, pero aparece en las exportaciones CSV que se hacen de incidencias.</li> <li>Puede autorrellenarse (face): Indica si se permite que el trabajador pueda rellenar una incidencia de este tipo \u00e9l mismo (con la posterior verificaci\u00f3n por parte de un administrador).</li> <li>Notifica (email): Indica si la introducci\u00f3n de una incidencia de este tipo notifica por correo electr\u00f3nico a las personas especificadas en la categor\u00eda del trabajador.</li> <li>Se autovalida (verified_user): Indica si al introducir una incidencia de este tipo se autovalida sin necesidad de ser validada posteriormente por el trabajador.</li> </ul>"},{"location":"administradores/incidencias/#como-anadir-incidencias","title":"C\u00f3mo a\u00f1adir incidencias","text":"<p>Hay diferentes maneras de a\u00f1adir una incidencia:</p>"},{"location":"administradores/incidencias/#anadir-una-incidencia-puntual-a-una-persona","title":"A\u00f1adir una incidencia puntual a una persona","text":"<p>Se puede agregar una incidencia puntual a una persona de muchas maneras dentro del aplicativo, pero una manera de realizarlo es acceder a la secci\u00f3n Incidencias, hacer clic en el bot\u00f3n add en la esquina inferior derecha de la pantalla y rellenar el formulario que aparece.</p>"},{"location":"administradores/incidencias/#anadir-una-incidencia-recurrente-a-una-persona","title":"A\u00f1adir una incidencia recurrente a una persona","text":"<p>Tambi\u00e9n hay varias maneras de realizar esto, pero una de ellas es acceder a la secci\u00f3n Incidencias y hacer clic en el bot\u00f3n repeat.</p>"},{"location":"administradores/incidencias/#anadir-una-incidencia-puntual-a-varias-personas-a-la-vez","title":"A\u00f1adir una incidencia puntual a varias personas a la vez","text":"<p>Para realizar esto, hay que acceder a la secci\u00f3n Trabajadores, seleccionar los trabajadores a los cuales se les quiere a\u00f1adir la incidencia, y hacer clic en el bot\u00f3n note_add.</p>"},{"location":"administradores/incidencias/#estado-de-una-incidencia","title":"Estado de una incidencia","text":"<p>Cada incidencia puede estar en diferentes estados en el transcurso del tiempo:</p> <ul> <li>Pendiente de revisi\u00f3n (new_releases): una incidencia est\u00e1 en este estado cuando la ha a\u00f1adido un trabajador y todav\u00eda no ha sido revisada por los administradores.</li> <li>Programada (schedule): cuando una incidencia se ha a\u00f1adido correctamente (y si la ha introducido un trabajador ya se ha revisado) pero ocurrir\u00e1 en el futuro.</li> <li>Registrada (check): cuando una incidencia ya ha sucedido.</li> <li>Validada (verified_user): cuando una incidencia ya ha sucedido y el trabajador la ha validado (para m\u00e1s informaci\u00f3n, v\u00e9ase el apartado validaciones).</li> <li>Rechazada al revisar (block): cuando una incidencia creada por un trabajador se rechaza en el proceso de revisi\u00f3n. Estas incidencias no tienen ning\u00fan efecto en el aplicativo, pero se mantienen en el aplicativo para poderse consultar.</li> <li>Invalidada manualmente (delete_forever): cuando una incidencia que estaba registrada o validada se elimina, esta se mantiene en el aplicativo con el estado de invalidada. Estas incidencias no tienen ning\u00fan efecto en el aplicativo, y tambi\u00e9n se mantienen en el aplicativo \u00fanicamente para que se puedan consultar.</li> </ul> <p>PDFs exportados</p> <p>Las \u00fanicas incidencias que se incluyen en los PDFs exportados son las registradas y las validadas.</p>"},{"location":"administradores/incidencias/#vida-de-una-incidencia","title":"Vida de una incidencia","text":"<p>Este es un diagrama que expone los estados por los que puede pasar una incidencia a lo largo de su vida:</p>"},{"location":"administradores/incidencias/#observaciones-y-archivos-adjuntos","title":"Observaciones y archivos adjuntos","text":"<p>Las incidencias pueden tener asociadas observaciones y archivos adjuntos.</p> <p>Existen dos campos de observaciones: uno donde puede escribir el trabajador y otro en el que solo pueden escribir los administradores. El primero sirve para dejar constancia de las observaciones en el aplicativo y que sean visibles por los administradores, mientras que el segundo se usa para a\u00f1adir observaciones que ser\u00e1n visibles en el PDF exportado.</p> <p>Con respecto a los archivos adjuntos, cada incidencia puede tener asociados varios archivos adjuntos. Tanto el trabajador como los administradores pueden a\u00f1adir archivos adjuntos, y ambas partes pueden elimnar tambi\u00e9n los archivos adjuntos que hay a\u00f1adidos en la incidencia.</p>"},{"location":"administradores/personas/","title":"Personas","text":"<p>La secci\u00f3n Personas contiene una lista de las personas a\u00f1adidas al aplicativo, que pueden ser tanto trabajadoras de la(s) empresa(s) como no. Cada una de las personas de la lista tiene asociado un usuario y contrase\u00f1a con los cuales pueden iniciar sesi\u00f3n en el sitio web (exceptuando las personas con rol de Trabajador si la opci\u00f3n <code>$conf[\"enableWorkerUI\"]</code> est\u00e1 desactivada).</p> <p>Es posible que en la documentaci\u00f3n a una persona se le domine tambi\u00e9n como usuario.</p>"},{"location":"administradores/personas/#anadir-personas","title":"A\u00f1adir personas","text":""},{"location":"administradores/personas/#manualmente","title":"Manualmente","text":"<p>Se pueden a\u00f1adir personas manualmente haciendo clic en el bot\u00f3n add de la parte inferior derecha de la p\u00e1gina, y rellenando el formulario que aparece.</p>"},{"location":"administradores/personas/#en-masa-mediante-un-archivo-csv","title":"En masa mediante un archivo CSV","text":"<p>Para ello, haz clic en el bot\u00f3n file_upload de la parte inferior derecha de la p\u00e1gina. Deber\u00e1s subir un archivo CSV con el formato especificado en las intrucciones que aparecer\u00e1n.</p> <p>En resumen, debes subir un archivo CSV delimitado con <code>;</code>, y con la cabecera <code>dni;name;category;email;companies</code>. Luego, las siguientes l\u00edneas deben ser las personas que quieres agregar, donde la columna <code>category</code> contendr\u00e1 los IDs de las categor\u00edas ya creadas en el aplicativo en las que querr\u00e1s agregar cada persona (o -1 si no quieres agregarla a ninguna categor\u00eda), y la columna <code>companies</code> contendr\u00e1 una cadena de caracteres con los IDs de las empresas separados por comas (sin espacios despu\u00e9s o antes de la coma) de las empresas a las que querr\u00e1s dar de alta cada persona. Las dem\u00e1s columnas contendr\u00e1n texto.</p> <p>Puedes generar el archivo CSV desde programas como OpenOffice, LibreOffice, Google Sheets o Excel.</p>"},{"location":"administradores/personas/#categorias","title":"Categor\u00edas","text":"<p>Las categorias, que se configuran desde la secci\u00f3n Configuraci\u00f3n, sirven para clasificar las personas en diferentes grupos. Esto aporta las siguientes ventajas:</p> <ul> <li>En el listado de personas se pueden filtrar personas por categor\u00eda.</li> <li>Cuando se exporta un PDF, en el selector de personas se pueden seleccionar o deseleccionar con un solo clic todos los trabajadores pertenecientes a una categor\u00eda.</li> <li>El aplicativo permite configurar un calendario de d\u00edas lectivos/no lectivos/festivos que se aplica a todos los trabajadores, pero tambi\u00e9n es posible configurar un calendario al nivel de una categor\u00eda en el caso que el calendario sea diferente. Para m\u00e1s informaci\u00f3n, se puede consultar la documentaci\u00f3n para la secci\u00f3n de calendarios.</li> </ul> <p>Finalmente, esta es la configuraci\u00f3n que admite cada categor\u00eda:</p> <ul> <li>Cada categor\u00eda puede tener configurada una categor\u00eda padre. Esto se usa \u00fanicamente para que todas las categor\u00edas que tengan configurada una categor\u00eda padre se asocien en una sola en los filtros del listado de personas.</li> <li>A cada categor\u00eda tambi\u00e9n se le pueden asignar una lista de correos electr\u00f3nicos de los responsables, que se usa para definir los correos electr\u00f3nicos de los responsables de los trabajadores de esa categor\u00eda. En el momento se usa para enviar ciertas notificaciones de correo electr\u00f3nico cuando se crean ciertos tipos de incidencia (para m\u00e1s informaci\u00f3n, cons\u00faltese este art\u00edculo).</li> </ul>"},{"location":"administradores/recursos-de-ayuda/","title":"Recursos de ayuda","text":"<p>Con el fin de ayudar a que los trabajadores realicen distintas tareas conforme a un marco espec\u00edfico de la empresa, se pueden configurar enlaces de ayuda en diferentes partes de la aplicaci\u00f3n que apunten a documentos/p\u00e1ginas internas de la empresa con instrucciones adicionales.</p> <p>Para hacer esto, hay que entrar a la p\u00e1gina Recursos de ayuda que se encuentra dentro de la secci\u00f3n Configuraci\u00f3n.</p>"},{"location":"administradores/registros/","title":"Generaci\u00f3n de registros","text":"<p>Cada d\u00eda, al final del d\u00eda, un programa transforma los horarios base en registros que dejan constancia del horario que hubiera tenido que hacer cada trabajador durante ese d\u00eda. Esto se hace as\u00ed porque luego el trabajador debe validar cada uno de estos registros y de esta forma tampoco se depende de que el horario base est\u00e9 correctamente definido una vez ya se han generado y validado todos los registros.</p>"},{"location":"administradores/registros/#algoritmo-de-generacion-de-los-registros","title":"Algoritmo de generaci\u00f3n de los registros","text":"<ol> <li>Primero se carga una lista de horarios base, que se trata de los horario base activos en el momento de generar los registros tal que la fecha en la que se ejecute est\u00e9 dentro del periodo de validez del horario base.</li> <li>Para cada uno de estos horarios base, se realiza lo siguiente:<ol> <li>Se obtiene qui\u00e9n es el trabajador sobre el cual se define el horario en cuesti\u00f3n.</li> <li>Se obtiene el calendario laboral correspondiente al trabajador de la siguiente manera:<ol> <li>Si el trabajador est\u00e1 dentro de una categor\u00eda, se busca si la categor\u00eda tiene definido un calendario para el d\u00eda actual. Si es as\u00ed, este es el calendario que se obtiene.</li> <li>En caso contrario, se busca si existe un calendario por defecto definido para el d\u00eda actual. Si es as\u00ed, este es el calendario que se obtiene.</li> <li>En caso contrario, salta un mensaje de advertencia y se pasa a tratar directamente el siguiente horario, ya que no se ha encontrado ning\u00fan calendario que nos diga qu\u00e9 tipo de d\u00eda es el d\u00eda actual.</li> </ol> </li> <li>Se mira qu\u00e9 tipo de d\u00eda es el d\u00eda actual en el calendario obtenido. Si no existe un horario diario para el d\u00eda de la semana actual (lunes-domingo) y tipo de d\u00eda (lectivo/no lectivo/festivo), entonces se pasa a procesar el horario base siguiente, porque no tenemos que generar ning\u00fan registro.</li> <li>En este punto nos hemos asegurado de que hay que generar un registro. Es por ello que miramos si ya existe un registro generado para el trabajador y el d\u00eda actual.<ol> <li>En caso que ya exista un registro, salta un mensaje de advertencia y se pasa a tratar directamente el siguiente horario.</li> <li>En caso contrario, se procede a generar el registro, copiando los datos que hab\u00eda en el horario base para el d\u00eda de la semana y tipo de d\u00eda actual.</li> </ol> </li> </ol> </li> </ol>"},{"location":"administradores/registros/#ver-los-registros-generados","title":"Ver los registros generados","text":""},{"location":"administradores/registros/#ver-una-lista-global","title":"Ver una lista global","text":"<p>Para ver una lista con todos los registros generados, se debe acceder a la secci\u00f3n Registro que hay en el men\u00fa lateral.</p>"},{"location":"administradores/registros/#ver-una-lista-para-un-trabajador","title":"Ver una lista para un trabajador","text":"<p>Se debe acceder a la secci\u00f3n Trabajadores y hacer clic en el icono list al lado de un trabajador.</p>"},{"location":"administradores/registros/#corregir-errores-en-los-registros","title":"Corregir errores en los registros","text":"<p>Podr\u00eda ser que al definir los horarios base se cometa alg\u00fan error y haya que rectificarlo en los registros generados. Para ello, existen dos herramientas que nos permiten modificar indirectamente la tabla de registros con el fin de subsanar el error.</p>"},{"location":"administradores/registros/#invalidar-registros","title":"Invalidar registros","text":"<p>Cada registro se puede invalidar, de tal manera que act\u00faa como si no existiera. No es posible eliminar registros ya que la ley espa\u00f1ola prohibe que el registro horario pueda verse modificado por parte de la empresa, pero con el fin de arreglar los errores es posible invalidar los registros, dejando una copia del registro que aunque no tenga ning\u00fan tipo de efecto, se pueda seguir consultando para corroborar que el registro se ha invalidado.</p>"},{"location":"administradores/registros/#invalidar-un-registro-especifico","title":"Invalidar un registro espec\u00edfico","text":"<p>Para hacer esto, hay que hacer clic en el bot\u00f3n more_vert al lado de un registro en un listado de registros y seleccionar la opci\u00f3n Invalidar.</p>"},{"location":"administradores/registros/#invalidar-varios-dias-de-registros","title":"Invalidar varios d\u00edas de registros","text":"<p>Es posible invalidar varios d\u00edas de registros para varios trabajadores concretos mediante una sola acci\u00f3n, lo que facilita la invalidaci\u00f3n de un error que ha ocurrido durante mucho tiempo y/o para varios trabajadores.</p> <p>Para acceder a la herramienta que permite hacer esto, hay que ser un usuario de tipo hiperadministrador, ya que los usuarios de tipo administrador no tienen acceso a esta herramienta. Ve a la secci\u00f3n Configuraci\u00f3n desde el men\u00fa lateral, y selecciona la opci\u00f3n Herramientas avanzadas. All\u00ed, selecciona la opci\u00f3n Invalidar registros en masa y sigue las instrucciones de la p\u00e1gina.</p>"},{"location":"administradores/registros/#generar-registros-manualmente","title":"Generar registros manualmente","text":"<p>Esta herramienta permite generar registros manualmente de un d\u00eda en concreto a partir de los horarios base con el mismo algoritmo que lo hace el script que los genera autom\u00e1ticamente, pero para los horarios pertenecientes a un subconjunto de trabajadores, en vez de obtener todos los horarios base aplicables.</p> <p>Para acceder a la herramienta, tambi\u00e9n se debe ser un usuario de tipo hiperadministrador. Ve a la secci\u00f3n Configuraci\u00f3n desde el men\u00fa lateral, y selecciona la opci\u00f3n Herramientas avanzadas. All\u00ed, selecciona la opci\u00f3n Generar registros manualmente.</p> <p>Modo avanzado</p> <p>Si se hace clic en el bot\u00f3n Activar modo avanzado de la herramienta, se podr\u00e1 seleccionar que se generen los registros horarios durante un intervalo de fechas en vez de en un d\u00eda en espec\u00edfico. Lo que har\u00e1 esto es recorrer el algoritmo descrito anteriormente para cada d\u00eda del intervalo de fechas.</p> <p>El resultado de las acciones que se toman con la herramienta en este modo pueden ser catastr\u00f3ficas, as\u00ed que antes de usarlo aseg\u00farate de leer y comprender la advertencia que aparece cuando entras en este modo.</p>"},{"location":"administradores/registros/#ver-logs","title":"Ver logs","text":"<p>Cada vez que se ejecuta el script de generaci\u00f3n de registros o se usa la herramienta para generar registros manualmente, se guarda un archivo de texto llamado log con el resultado de la acci\u00f3n y si ha habido errores.</p> <p>Es conveniente ver si ha habido alg\u00fan error o advertencia de vez en cuando, porque en este caso puede que no se hayan generado todos los registros correctamente y haga falta corregirlo manualmente.</p> <p>Para acceder a los logs, se debe ir a la secci\u00f3n Configuraci\u00f3n desde el men\u00fa lateral y hacer clic en la opci\u00f3n Logs. En el listado aparecer\u00e1n los iconos warning, error y error dependiendo de si ese log contiene un mensaje de advertencia, de error, o de error fatal. Mediante el icono notes se puede ver el log.</p>"},{"location":"administradores/registros/#causas-de-una-advertencia","title":"Causas de una advertencia","text":"<p>Una advertencia puede causarse por los siguientes motivos, que son causa de una mala configuraci\u00f3n por parte del administrador:</p> <ul> <li>No se ha podido encontrar un calendario para alg\u00fan trabajador que ten\u00eda un horario asignado.</li> <li>Un trabajador ya ten\u00eda un registro creado para el mismo d\u00eda para el que se intentaba generar el registro, as\u00ed que no se ha generado.</li> </ul>"},{"location":"administradores/registros/#causas-de-un-error","title":"Causas de un error","text":"<p>Un error puede causarse por los siguientes motivos, que son siempre errores del aplicativo y no tienen por qu\u00e9 implicar un error por parte del administrador:</p> <ul> <li>Al intentar insertar el registro en la base de datos ha ocurrido un problema interno.</li> </ul>"},{"location":"administradores/registros/#causas-de-un-error-fatal","title":"Causas de un error fatal","text":"<p>Un error fatal consiste en errores inesperados del aplicativo, como los errores, y estas son las posibles causas:</p> <ul> <li>No se han podido cargar los calendarios por un error interno (y no se ha generado ning\u00fan registro).</li> <li>No se han podido cargar los horarios aplicables por un error interno (y no se ha generado ning\u00fan registro).</li> <li>Mientras se procesaba un registro, ha ocurrido un error interno y no se han podido obtener los detalles del registro (puede que se hayan procesado otros registros correctamente).</li> </ul>"},{"location":"administradores/seguridad/","title":"Seguridad","text":"<p>El objetivo de este art\u00edculo es explicar varios aspectos de la seguridad del aplicativo.</p>"},{"location":"administradores/seguridad/#como-cambiar-la-contrasena-a-una-persona","title":"C\u00f3mo cambiar la contrase\u00f1a a una persona","text":"<p>Para cambiar la contrase\u00f1a a una persona, se debe ir a la secci\u00f3n de Personas y hacer clic en el bot\u00f3n edit al lado de una persona. En el di\u00e1logo que aparece hay un cambio para cambiar la contrase\u00f1a que, si se deja vac\u00edo, no cambia la contrase\u00f1a, pero si se introduce una nueva contrase\u00f1a se cambia por esta.</p>"},{"location":"administradores/seguridad/#como-desactivar-la-verificacion-en-dos-pasos-de-una-persona","title":"C\u00f3mo desactivar la verificaci\u00f3n en dos pasos de una persona","text":"<p>(Para m\u00e1s informaci\u00f3n sobre la verificaci\u00f3n en dos pasos, v\u00e9ase este art\u00edculo del manual de trabajadores)</p> <p>En la secci\u00f3n Personas, si se hace clic en el bot\u00f3n open_in_new al lado de una persona, aparecer\u00e1 un bot\u00f3n para desactivar la verificaci\u00f3n en dos pasos si la persona la tiene activada.</p>"},{"location":"administradores/seguridad/#como-enviar-enlaces-para-que-varias-personas-reestablezcan-su-contrasena","title":"C\u00f3mo enviar enlaces para que varias personas (re)establezcan su contrase\u00f1a","text":"<p>Si has a\u00f1adido una persona recientemente o han perdido su contrase\u00f1a y eres un usuario hiperadministrador, puedes enviarles un correo electr\u00f3nico con un enlace para que la cambien. Para hacerlo, sigue los siguientes pasos:</p> <ol> <li>Accede a la secci\u00f3n Configuraci\u00f3n.</li> <li>Abre la p\u00e1gina Herramientas avanzadas.</li> <li>Abre la p\u00e1gina Enviar enlaces para generar contrase\u00f1a.</li> <li>All\u00ed, selecciona las personas a las que les quieres enviar los enlaces, y haz clic en Enviar.</li> </ol>"},{"location":"administradores/trabajadores/","title":"Trabajadores","text":"<p>El concepto de trabajador es diferente al de persona. Un trabajador se define como la relaci\u00f3n entre una persona y una empresa. As\u00ed pues, una persona puede tener asociada diversos trabajadores, en caso que est\u00e9 trabajando para varias empresas a la vez, y los datos de inicio de sesi\u00f3n de la persona sirven para administrar a todos los trabajadores asociados.</p>"},{"location":"administradores/trabajadores/#como-anadir-un-trabajador","title":"C\u00f3mo a\u00f1adir un trabajador","text":"<p>Para a\u00f1adir un trabajador, se debe ir a la secci\u00f3n Personas. All\u00ed, haz clic en el bot\u00f3n work al lado de una persona de la tabla, y en el di\u00e1logo que aparece podr\u00e1s a\u00f1adir la empresa al usuario. Esta acci\u00f3n crear\u00e1 un historial de altas y bajas de esa persona en esa empresa con un registro de alta autogenerado.</p>"},{"location":"administradores/trabajadores/#historial-de-altas-y-bajas","title":"Historial de altas y bajas","text":"<p>El historial de altas y bajas es un registro modificable de las altas y bajas que tiene un trabajador. Se puede acceder a \u00e9l desde el di\u00e1logo mencionado en la secci\u00f3n anterior o haciendo clic en el bot\u00f3n history en la secci\u00f3n Trabajadores.</p> <p>Para determinar si un trabajador est\u00e1 de alta o de baja, el aplicativo coger\u00e1 el \u00faltimo registro con fecha anterior a la fecha actual, y lo determinar\u00e1 a partir de este. En el caso que no exista ning\u00fan registro de alta/baja anterior a la fecha actual, el aplicativo entender\u00e1 que el trabajador est\u00e1 de baja.</p> <p>Bajas de personas vs. bajas de trabajadores</p> <p>Anteriormente, cuando todav\u00eda no exist\u00eda la funcionalidad de los historiales de altas y bajas, el aplicativo permit\u00eda poner en estado de alta/baja las personas y los trabajadores por separado. Ahora, con el historial de altas y bajas, la funcionalidad anterior de altas/bajas ha sido eliminado.</p> <p>As\u00ed pues, para mantener la compatibilidad con la vista anterior de altas/bajas, se determina la condici\u00f3n de alta/baja a partir de los nuevos historiales.</p> <p>En el caso de las personas, ahora se determina que est\u00e1n de baja si no cuelga de \u00e9l ning\u00fan trabajador que est\u00e9 dado de alta.</p>"},{"location":"administradores/validaciones/","title":"Validaciones","text":"<p>La informaci\u00f3n general sobre las validaciones est\u00e1 disponible en este art\u00edculo del manual de trabajadores. En este art\u00edculo se expandir\u00e1 sobre funciones de las validaciones espec\u00edficas para administradores.</p>"},{"location":"administradores/validaciones/#configurar-la-autovalidacion-para-un-tipo-de-incidencia","title":"Configurar la autovalidaci\u00f3n para un tipo de incidencia","text":"<ol> <li>Ve a la secci\u00f3n Configuraci\u00f3n desde el men\u00fa lateral.</li> <li>Abre la p\u00e1gina Tipos de incidencia.</li> <li>Cuando a\u00f1adas o modifiques un tipo de incidencia, activa la opci\u00f3n Se autovalida (verified_user).</li> </ol>"},{"location":"administradores/validaciones/#ver-el-numero-de-validaciones-pendientes-por-trabajador","title":"Ver el n\u00famero de validaciones pendientes por trabajador","text":"<p>Para hacer esto debes ser un usuario hiperadministrador.</p> <ol> <li>Ve a la secci\u00f3n Configuraci\u00f3n.</li> <li>Abre la p\u00e1gina Herramientas avanzadas.</li> <li>Haz clic en Validaciones pendientes.</li> </ol>"},{"location":"administradores/instalacion-y-configuracion/configuracion/","title":"Configuraci\u00f3n","text":"<p>Una vez instalado el aplicativo, podemos empezar a configurar el aplicativo.</p>"},{"location":"administradores/instalacion-y-configuracion/configuracion/#introduccion-de-datos","title":"Introducci\u00f3n de datos","text":"<p>Para empezar a configurar el aplicativo introduciendo los datos de la empresa como por ejemplo los empleados y sus horarios, entra a la p\u00e1gina principal del aplicativo e inicia sesi\u00f3n. Despu\u00e9s de iniciar sesi\u00f3n, ver\u00e1s una serie de pasos en la pantalla de bienvenida, que te servir\u00e1n para empezar a introducir los datos:</p> <p>Una vez empieces a realizar uno de los pasos, este saldr\u00e1 de color gris, y cuando realices todos, el mensaje de bienvenida desaparecer\u00e1.</p> <p>El aplicativo est\u00e1 dise\u00f1ado con la base de que sea intuitivo y no haga falta leerse todo el manual de instrucciones para ser usado, sino m\u00e1s bien ser consultado en caso de dudas una vez est\u00e9 configurado. Es por ello que, con el fin de explicar las funciones m\u00e1s esenciales en el mismo aplicativo sin necesidad de haber de consultar este manual, se encontrar\u00e1n iconos con un signo de interrogaci\u00f3n por todas las p\u00e1ginas que explican el funcionamiento de diversas partes del programa si se pone el rat\u00f3n encima.</p> <p>Aun as\u00ed, este manual aportar\u00e1 m\u00e1s profundidad en cada una de las funciones del aplicativo, en caso que sea necesario.</p>"},{"location":"administradores/instalacion-y-configuracion/configuracion/#notificaciones-por-correo-electronico","title":"Notificaciones por correo electr\u00f3nico","text":"<p>Para configurar las notificaciones por correo electr\u00f3nico, hace falta modificar el archivo <code>config.php</code>. Se deben configurar las siguientes variables:</p> <ul> <li><code>$conf[\"mail\"][\"enabled\"]</code>: se debe definir como <code>true</code> para activar la funcionalidad del correo.</li> <li><code>$conf[\"mail\"][\"stmpauth\"]</code> hasta <code>$conf[\"mail\"][\"remitentName\"]</code>: configuraci\u00f3n de las credenciales del servidor SMTP de correo, desde donde se enviar\u00e1n los correos.</li> <li><code>$conf[\"mail\"][\"subjectPrefix\"]</code>: prefijo a\u00f1adido a los asuntos de los correos enviados. Permite identificar mejor las notificaciones enviadas de los dem\u00e1s correos recibidos por el trabajador.</li> <li><code>$conf[\"mail\"][\"adminEmail\"]</code>: opcional, se usa como direcci\u00f3n al que se env\u00eda un correo cada vez que un trabajador crea una incidencia (solo si est\u00e1 activada la opci\u00f3n <code>$conf[\"mail\"][\"capabilities\"][\"notifyOnWorkerIncidentCreation\"]</code>).</li> </ul> <p>Finalmente, se pueden configurar las variables <code>$conf[\"mail\"][\"capabilities\"][\"{tipo de notificaci\u00f3n}\"]</code> para activar o desactivar los distintos tipos de notificaci\u00f3n (al lado de cada variable hay un comentario explicando qu\u00e9 tipo de notificaci\u00f3n es cada una). Estos son los diferentes tipos de notificaci\u00f3n que hay disponibles:</p> <ul> <li><code>notifyOnWorkerIncidentCreation</code>: env\u00eda una notificaci\u00f3n a <code>$conf[\"mail\"][\"adminEmail\"]</code> cada vez que un trabajador a\u00f1ade una incidencia.</li> <li><code>notifyOnAdminIncidentCreation</code>: env\u00eda una notificaci\u00f3n a <code>$conf[\"mail\"][\"adminEmail\"]</code> cada vez que un administrador a\u00f1ade una incidencia.</li> <li><code>notifyCategoryResponsiblesOnIncidentCreation</code>: cada vez que se crea una incidencia, si el tipo de incidencia tiene activada la opci\u00f3n notificar, se enviar\u00e1 una notificaci\u00f3n a sus responsables, si est\u00e1n definidos (para m\u00e1s informaci\u00f3n sobre los responsables de una categor\u00eda consulta este art\u00edculo).</li> <li><code>notifyWorkerOnIncidentDecision</code>: cuando se revisa una incidencia creada por un trabajador, se env\u00eda una notificaci\u00f3n al trabajador para que sepa si se ha aprovado o rechazado la incidencia.</li> <li><code>sendPendingValidationsReminder</code>: env\u00eda notificaciones peri\u00f3dicas a los trabajadores que tengan incidencias o registros de horario pendientes para que los validen. Activar este tipo de notificaciones en el archivo <code>config.php</code> no tiene ning\u00fan efecto por s\u00ed solo (v\u00e9ase la siguiente subsecci\u00f3n donde se explica c\u00f3mo configurar este tipo de notificaciones), pero si se desactiva, se bloquear\u00e1 el env\u00edo de este tipo de notificaciones.</li> </ul>"},{"location":"administradores/instalacion-y-configuracion/configuracion/#notificacion-de-validaciones-pendientes","title":"Notificaci\u00f3n de validaciones pendientes","text":"<p>Las notificaciones de validaciones pendientes se realizan ejecutando el script <code>src/cron/pendingvalidationsreminder.php</code>. Lo que hace realmente este script es ver qu\u00e9 trabajadores acumulan alg\u00fan elemento que est\u00e9 pendiente de validarse durante m\u00e1s de un cierto periodo de tiempo, y enviarles una notificaci\u00f3n a estos. De esta manera no se enviar\u00e1n notificaciones a personas cuyos elementos pendientes de validar hayan aparecido en la secci\u00f3n de validaci\u00f3n hace poco tiempo.</p> <p>As\u00ed pues, para configurar estas notificaciones hay que realizar lo siguiente:</p> <ol> <li>En el archivo <code>config.php</code>, configurar lo siguientes valores:<ol> <li>Establecer <code>$conf[\"mail\"][\"capabilities\"][\"sendPendingValidationsReminder\"]</code> a <code>true</code> para permitir este tipo de notificaciones.</li> <li>Establecer <code>$conf[\"validation\"][\"gracePeriod\"]</code> al n\u00famero de d\u00edas que las incidencias/registros horarios pueden permanecer pendientes de validar y no generar una notificaci\u00f3n.</li> </ol> </li> <li>Configurar que se ejecute el script <code>src/cron/pendingvalidationsreminder.php</code> peri\u00f3dicamente (por ejemplo, con el programa crontab). Tambi\u00e9n se puede ejecutar este script manualmente (<code>php src/cron/pendingvalidationsreminder.php</code>) cuando se desee.</li> </ol>"},{"location":"administradores/instalacion-y-configuracion/configuracion/#verificacion-en-dos-pasos","title":"Verificaci\u00f3n en dos pasos","text":"<p>Para permitir a los usuarios configurar la verificaci\u00f3n en dos pasos, se deben configurar las siguientes variables en <code>config.php</code>:</p> <ul> <li><code>$conf[\"secondFactor\"][\"enabled\"]</code>: se debe definir como <code>true</code> para permitir la verificaci\u00f3n en dos pasos.</li> <li><code>$conf[\"secondFactor\"][\"origin\"]</code>: usado para las llaves de seguridad (WebAuthn), hay que introducir el dominio donde est\u00e1 alojado el aplicativo (por ejemplo, <code>example.org</code>).</li> </ul>"},{"location":"administradores/instalacion-y-configuracion/configuracion/#configuracion-variada","title":"Configuraci\u00f3n variada","text":"<p>Se recomienda echarle un vistazo al archivo <code>config.php</code> entero para ver otros valores que se pueden configurar, como por ejemplo el color del fondo de las p\u00e1ginas, opciones para los PDFs generados, etc. Estas opciones est\u00e1n comentadas claramente en el mismo archivo.</p>"},{"location":"administradores/instalacion-y-configuracion/instalacion/","title":"Instalaci\u00f3n","text":""},{"location":"administradores/instalacion-y-configuracion/instalacion/#requisitos","title":"Requisitos","text":"<p>El servidor donde se va a instalar el aplicativo debe cumplir los siguientes requisitos:</p> <ul> <li>Sistema operativo: distro Linux, Mac o Windows (se recomienda Linux, ya que solo est\u00e1 probado con Linux)</li> <li>Servidor: Apache 2, PHP 8.3 (incluyendo las extensiones <code>curl</code>, <code>intl</code>, <code>mbstring</code> y <code>mysql</code>), MySQL.</li> </ul>"},{"location":"administradores/instalacion-y-configuracion/instalacion/#instalacion_1","title":"Instalaci\u00f3n","text":"<p>Para instalar el aplicativo, descarga el c\u00f3digo fuente desde https://github.com/avm99963/hores-external y extraelo en el directorio ra\u00edz de Apache (<code>/var/www/html/</code> es el directorio ra\u00edz de Apache por defecto en Ubuntu).</p> <p>Luego, crea una base de datos MySQL mediante el siguiente comando: <code>CREATE DATABASE hores CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code>, donde <code>hores</code> es el nombre para la base de datos que prefieras.</p> <p>Ahora, para activar los archivos adjuntos, se debe crear una carpeta en el servidor con permisos de lectura y escritura por el usuario del servidor (en el caso de Apache en Ubuntu es <code>www-data</code>) donde se guardar\u00e1n los archivos adjuntos de las incidencias.</p> <p>Aseg\u00farate de que la carpeta no es accesible desde Internet</p> <p>En caso que la carpeta estuviera dentro del directorio del aplicativo, esta ser\u00eda accesible desde Internet, \u00a1y por lo tanto cualquier persona podr\u00eda visualizar los archivos adjuntos!</p> <p>Tama\u00f1o m\u00e1ximo de las subidas de archivos</p> <p>El tama\u00f1o de los archivos adjuntos est\u00e1 limitado a 6 MB des del aplicativo. Aun as\u00ed, PHP por defecto podr\u00eda tener la directiva <code>upload_max_filesize = 2M</code> en <code>php.ini</code>. Por este motivo, es conveniente comprobar cu\u00e1l es el valor de la directiva, y aumentar el valor a como m\u00ednimo 6 MB para que el aplicativo funcione correctamente.</p> <p>Seguidamente, haz una copia del archivo <code>config.default.php</code> a <code>config.php</code>, y edita esta \u00faltima copia para configurar algunas opciones del aplicativo.</p> <p>De momento, estos son los aspectos fundamentales que deber\u00edas configurar en ese archivo antes de proceder:</p> <ul> <li><code>$conf[\"db\"]</code>: las credenciales de acceso de la base de datos.</li> <li><code>$conf[\"path\"]</code>: es la direcci\u00f3n de la p\u00e1gina web sin tener en cuenta el dominio. Se usar\u00e1 para configurar las cookies de inicio de sesi\u00f3n. Por ejemplo, si el aplicativo se sirve en <code>https://example.org/controlhorario/</code>, el valor se deber\u00eda configurar como <code>/controlhorario/</code>, y si el aplicativo se sirve en <code>https://example.org/</code>, el valor se deber\u00eda configurar como <code>/</code>.</li> <li><code>$conf[\"fullPath\"]</code>: es la direcci\u00f3n de la p\u00e1gina web. Se usar\u00e1 para enlazar al aplicativo cuando se env\u00eden notificaciones por correo electr\u00f3nico. Por ejemplo, si el aplicativo se sirve en <code>https://example.org/</code>, el valor se deber\u00eda configurar como <code>https://example.org/</code>.</li> <li><code>$conf[\"attachmentsFolder\"]</code>: es la ruta a la carpeta donde se guardar\u00e1n los archivos adjuntos, con una barra al final. Por ejemplo: <code>/home/user/files/</code>.</li> </ul> <p>Ahora, accede a una terminal, y ejecuta el siguiente comando en la carpeta <code>src</code> del aplicativo para configurar la base de datos y a\u00f1adir el primer usuario administrador: <code>php install.php</code>.</p> <p>Finalmente, configuraremos que se ejecute un script peri\u00f3dicamente, que ser\u00e1 el que registrar\u00e1 cada d\u00eda los horarios de los trabajadores de ese d\u00eda, que se desprenden de cada uno de sus horarios base y los calendarios que hay configurados. Para ello, hay que hacer que se ejecute el script <code>src/cron/generateregistry.php</code> cada d\u00eda por la tarde-noche.</p> <p>C\u00f3mo configurar la ejecuci\u00f3n diaria del script en Ubuntu</p> <p>En Ubuntu, hay un programa instalado por defecto llamado <code>crontab</code>, que permite configurar la ejecuci\u00f3n peri\u00f3dica de un programa.</p> <p>As\u00ed pues, podemos ejecutar <code>crontab -e</code> y, en el fichero que se abre para editar, podemos a\u00f1adir lo siguiente en una l\u00ednea debajo del todo: <code>1 20 * * * php /var/www/html/src/cron/generateregistry.php</code>, cambiando la ruta al script a la ruta que corresponda en nustro servidor. Esto lo que har\u00e1 es ejecutar el script cada d\u00eda a las 20:01.</p> <p>Luego, si queremos ir limpiando la tabla de intentos de inicio de sesi\u00f3n, deber\u00edamos a\u00f1adir otra l\u00ednea para el otro script.</p> <p>A parte, hay otro script que tambi\u00e9n puede interesar ejecutar de vez en cuando. En la base de datos hay una tabla que se encarga de ir guardando los intentos de inicio de sesi\u00f3n que se hacen con el fin de prevenir posibles ataques de fuerza bruta. Si hay muchos intentos de inicio de sesi\u00f3n, esta tabla puede crecer mucho de tama\u00f1o, as\u00ed que existe un script <code>cron/cleansigninattempts.php</code> que borra todos los registros de la tabla con antig\u00fcedad mayor a <code>$conf[\"signinThrottling\"][\"retentionDays\"]</code>. Se puede configurar tambi\u00e9n la ejecuci\u00f3n peri\u00f3dica de este script, por ejemplo con un periodo de 1 semana o menos, dependiendo de cu\u00e1n r\u00e1pido crece el n\u00famero de registros de la tabla.</p>"},{"location":"trabajadores/","title":"Introducci\u00f3n","text":"<p>En esta secci\u00f3n se explica c\u00f3mo usar la vista de trabajador.</p> <p>Puedes usar las flechas que aparecen debajo del todo de cada p\u00e1gina para moverte por este manual, usar el men\u00fa lateral, o usar los enlaces que hay en la descripci\u00f3n siguiente de todas las secciones de la vista de trabajador:</p> <ul> <li>Horario actual: Muestra el horario base actual asignado junto a un enlace para visualizar un hist\u00f3rico de los horarios anteriores y/o futuros.</li> <li>Incidencias: Muestra un listado con tus incidencias y hay un formulario para introducir nuevas incidencias.</li> <li>Registro: Muestra un listado de los registros horarios que se desprenden del horario base. Este registro no es lo que determina totalmente las horas trabajadas, ya que solo incluye las horas te\u00f3ricas que se deber\u00edan haber trabajado, y queda modificado posteriormente por las incidencias.</li> <li>Validaciones: Muestra un listado de incidencias y elementos del registro horario que est\u00e1n pendientes de validar.</li> <li>Exportar registro: Permite exportar el registro como PDF o CSV.</li> <li>Seguridad: Permite cambiar la contrase\u00f1a o activar la verificaci\u00f3n en dos pasos.</li> </ul> <p>Adem\u00e1s, tambi\u00e9n puedes aprender c\u00f3mo reestablecer tu contrase\u00f1a en caso que la hayas olvidado.</p>"},{"location":"trabajadores/como-restablecer-contrasena/","title":"C\u00f3mo restablecer la contrase\u00f1a","text":"<p>Para restablecer tu contrase\u00f1a, ve a la p\u00e1gina principal del aplicativo y haz clic en el bot\u00f3n Recuperar contrase\u00f1a. Tendr\u00e1s que introducir tu documento de identificaci\u00f3n (DNI, NIE, etc.) con las letras en may\u00fasculas, y el correo electr\u00f3nico asociado a tu cuenta en el aplicativo (normalmente la direcci\u00f3n de correo de la empresa). Despu\u00e9s de enviar el formulario, recibir\u00e1s en tu correo electr\u00f3nico un enlace para cambiar la contrase\u00f1a.</p> <p>Si esto no funciona, puedes pedir al administrador del aplicativo que te cambie la contrase\u00f1a, ya que dispone de esta opci\u00f3n desde la vista de administrador. Lo m\u00e1s recomendable si se hace esto es que despu\u00e9s de volver a tener acceso al aplicativo cambies tu contrase\u00f1a para que solo t\u00fa sepas el usuario y contrase\u00f1a de tu cuenta.</p>"},{"location":"trabajadores/exportar-registro/","title":"Exportar registro","text":"<p>Para poder obtener una visi\u00f3n de las horas que ha trabajado un trabajador, se puede exportar el registro en un documento PDF que muestra el n\u00famero de horas diarias trabajadas y las incidencias que han ocurrido.</p> <p>Adem\u00e1s, tambi\u00e9n es posible exportar archivos CSV con las incidencias o registros horarios para poderlas importar en un editor de hojas de c\u00e1lculo y poder analizar estos datos con m\u00e1s con detalle.</p> <p>Esto se puede realizar desde la secci\u00f3n Exportar registro, disponible en el men\u00fa lateral del aplicativo.</p> <p>Al entrar en la p\u00e1gina, se tiene que configurar qu\u00e9 periodo quiere exportarse, y en qu\u00e9 formato se quiere exportar. Si se exporta un PDF tambi\u00e9n se puede configurar que las incidencias/registros horarios pendientes de validar salgan en rojo y tambi\u00e9n se puede filtrar para que en el PDF solo salgan los elementos validados o no validados.</p>"},{"location":"trabajadores/exportar-registro/#formatos-de-exportacion","title":"Formatos de exportaci\u00f3n","text":"<ul> <li>PDF con horario laboral: PDF que muestra los registros horarios de cada d\u00eda, con incidencias debajo del registro mostrando c\u00f3mo queda modificado el horario de ese d\u00eda. A la derecha aparecen las horas trabajadas cada d\u00eda.</li> <li>CSV con horarios: CSV con todos los registros horarios.</li> <li>CSV con incidencias: CSV con todas las incidencias.</li> </ul>"},{"location":"trabajadores/incidencias/","title":"Incidencias","text":"<p>Las incidencias son elementos que se sobreponen a los horarios base de los trabajadores para acabar de concretar qu\u00e9 horario exacto ha seguido un trabajador un d\u00eda en espec\u00edfico.</p>"},{"location":"trabajadores/incidencias/#que-incidencias-aparecen-en-el-listado","title":"\u00bfQu\u00e9 incidencias aparecen en el listado?","text":"<p>En el listado de incidencias aparecen todas tus incidencias: tanto las que has creado t\u00fa como las que han creado los administradores. A parte, tambi\u00e9n aparecen las incidencias que hayas creado y los administradores hayan rechazado, y las que han invalidado los administradores.</p>"},{"location":"trabajadores/incidencias/#como-anadir-incidencias","title":"C\u00f3mo a\u00f1adir incidencias","text":"<p>Para a\u00f1adir una incidencia, accede a la secci\u00f3n Incidencias desde el men\u00fa lateral y haz clic en el bot\u00f3n add de la parte inferior derecha de la p\u00e1gina. Luego, rellena el formulario y haz clic en el bot\u00f3n A\u00f1adir.</p> <p>Es posible que el administrador no permita que los trabajadores introduzcan incidencias de ciertos tipos. Si el tipo de incidencia no aparece en el selector, tendr\u00e1s que contactar con recursos humanos para que introduzcan ellos la incidencia.</p> <p>Despu\u00e9s de a\u00f1adir una incidencia, se pueden adjuntar archivos a esta mediante el bot\u00f3n attach_file que aparece al lado de la incidencia creada. Tambi\u00e9n se puede modificar o eliminar antes de que se revise mediante las opciones presentes en el men\u00fa more_vert.</p>"},{"location":"trabajadores/incidencias/#que-ocurre-despues-de-introducir-la-incidencia","title":"\u00bfQu\u00e9 ocurre despu\u00e9s de introducir la incidencia?","text":"<p>Despu\u00e9s de introducir la incidencia, los administradores deber\u00e1n revisarla para aceptarla o rechazarla. Si los administradores lo han configurado en el aplicativo, recibir\u00e1s una notificaci\u00f3n por correo electr\u00f3nico del resultado de la revisi\u00f3n.</p>"},{"location":"trabajadores/incidencias/#autoria-de-una-incidencia","title":"Autor\u00eda de una incidencia","text":"<p>Si deseas ver qui\u00e9n ha creado, revisado, validado o hecho la \u00faltima modificaci\u00f3n a la incidencia, puedes verlo yendo al men\u00fa de la incidencia y seleccionando Autor\u00eda.</p>"},{"location":"trabajadores/incidencias/#estado-de-una-incidencia","title":"Estado de una incidencia","text":"<p>Cada incidencia puede estar en diferentes estados en el transcurso del tiempo:</p> <ul> <li>Pendiente de revisi\u00f3n (new_releases): una incidencia est\u00e1 en este estado cuando la ha a\u00f1adido un trabajador y todav\u00eda no ha sido revisada por los administradores.</li> <li>Programada (schedule): cuando una incidencia se ha a\u00f1adido correctamente (y si la ha introducido un trabajador ya se ha revisado) pero ocurrir\u00e1 en el futuro.</li> <li>Registrada (check): cuando una incidencia ya ha sucedido.</li> <li>Validada (verified_user): cuando una incidencia ya ha sucedido y el trabajador la ha validado (para m\u00e1s informaci\u00f3n, v\u00e9ase el apartado validaciones).</li> <li>Rechazada al revisar (block): cuando una incidencia creada por un trabajador se rechaza en el proceso de revisi\u00f3n. Estas incidencias no tienen ning\u00fan efecto en el aplicativo, pero se mantienen en el aplicativo para poderse consultar.</li> <li>Invalidada manualmente (delete_forever): cuando una incidencia que estaba registrada o validada se elimina, esta se mantiene en el aplicativo con el estado de invalidada. Estas incidencias no tienen ning\u00fan efecto en el aplicativo, y tambi\u00e9n se mantienen en el aplicativo \u00fanicamente para que se puedan consultar.</li> </ul> <p>PDFs exportados</p> <p>Las \u00fanicas incidencias que se incluyen en los PDFs exportados son las registradas y las validadas.</p>"},{"location":"trabajadores/incidencias/#vida-de-una-incidencia","title":"Vida de una incidencia","text":"<p>Este es un diagrama que expone los estados por los que puede pasar una incidencia a lo largo de su vida:</p>"},{"location":"trabajadores/validaciones/","title":"Validaciones","text":"<p>Con el fin de corroborar que los trabajadores est\u00e1n conformes con los registros horarios generados y las incidencias que hay en el aplicativo, estos se deben validar por los trabajadores.</p>"},{"location":"trabajadores/validaciones/#como-validar-incidenciasregistros-horarios","title":"C\u00f3mo validar incidencias/registros horarios","text":"<p>Para realizar las validaciones, hay que acceder a la secci\u00f3n Validaciones desde el men\u00fa lateral del aplicativo. Si hay alg\u00fan elemento pendiente de validar, la opci\u00f3n Validaciones del men\u00fa presentar\u00e1 el n\u00famero de elementos que est\u00e1n pendientes de validar.</p> <p>En el listado de incidencias/registros, se deben seleccionar aquellos que se deseen validar, comprobando antes que lo que est\u00e9 establecido sea correcto. Se debe tener en cuenta que los registros horarios son los horarios base te\u00f3ricos, mientras que las incidencias acaban de perfilar cu\u00e1l ha sido el horario exacto seguido en un d\u00eda concreto.</p> <p>Despu\u00e9s de seleccionar los elementos que se desean validar y pulsar el bot\u00f3n Validar, aparecer\u00e1 una p\u00e1gina donde se puede escoger el m\u00e9todo de validaci\u00f3n que se prefiera. Por el momento solo hay la validaci\u00f3n por direcci\u00f3n IP, que guardar\u00e1 la direcci\u00f3n IP del trabajador y hora actual como elementos para dar validez a los elementos seleccionados.</p> <p>Una vez hecho clic en el bot\u00f3n Confirmar validaci\u00f3n, los elementos ya habr\u00e1n quedado validados.</p> <p>M\u00e1s informaci\u00f3n sobre la validaci\u00f3n de incidencias</p> <p>Cuando un trabajador crea una incidencia, esta se autovalida y no hace falta que se valide por el trabajador posteriormente, ya que se presupone que si el trabajador ha introducido una incidencia, est\u00e1 de acuerdo con lo que ha introducido.</p> <p>Aun as\u00ed, si el administrador modifica alg\u00fan aspecto de la incidencia, la autovalidaci\u00f3n se eliminar\u00e1, y har\u00e1 falta que el trabajador valide la incidencia posteriormente.</p> <p>Adem\u00e1s, el administrador puede configurar que se autovaliden ciertos ripos de incidencia aunque los cree el administrador. Esto est\u00e1 pensado para tipos de incidencia como por ejemplo bajas m\u00e9dicas, en las que no se espera que el trabajador tenga que estar pendiente de validar las incidencias creadas.</p> <p>Como apunte final, solo se pueden validar las incidencias que est\u00e9n en el estado check Registrada. Es por este motivo que algunas incidencias no saldr\u00e1n en el listado de validaciones pendientes aunque no se hayan validado todav\u00eda.</p>"},{"location":"trabajadores/verificacion-en-dos-pasos/","title":"Verificaci\u00f3n en dos pasos","text":"<p>La verificaci\u00f3n en dos pasos es un sistema que evita que terceros no autorizados puedan iniciar sesi\u00f3n si te roban la contrase\u00f1a. A\u00f1ade una capa de seguridad por encima de tu contrase\u00f1a que permite verificar con mayor fiabilidad que realmente eres t\u00fa quien intenta iniciar sesi\u00f3n.</p>"},{"location":"trabajadores/verificacion-en-dos-pasos/#como-funciona","title":"\u00bfC\u00f3mo funciona?","text":"<p>Despu\u00e9s de configurar la verificaci\u00f3n en dos pasos, cuando inicies sesi\u00f3n, a parte de introducir tu contrase\u00f1a, deber\u00e1s introducir un c\u00f3digo generado en una aplicaci\u00f3n en tu m\u00f3vil. De esta manera, solo un atacante que consiga tu contrase\u00f1a y acceso a tu m\u00f3vil ser\u00eda capaz de iniciar sesi\u00f3n en tu cuenta, algo que es bastante m\u00e1s improbable que si solo tuviera que conseguir tu contrase\u00f1a.</p> <p>A parte, tambi\u00e9n se puede configurar como segundo factor, a parte del c\u00f3digo, una llave de seguridad. La llave de seguridad puede ser una llave de seguridad f\u00edsica USB o Bluetooth, o un mecanismo de autenticaci\u00f3n de tu dispositivo como puede ser por ejemplo tu huella dactilar.</p>"},{"location":"trabajadores/verificacion-en-dos-pasos/#como-se-configura","title":"\u00bfC\u00f3mo se configura?","text":"<p>Para configurarlo, accede a la secci\u00f3n Seguridad desde el men\u00fa lateral. All\u00ed, en la secci\u00f3n Verificaci\u00f3n en dos pasos, haz clic en el bot\u00f3n Empezar.</p> <p>Sigue los pasos para instalar la aplicaci\u00f3n que generarar\u00e1 los c\u00f3digos en tu m\u00f3vil y configrarla, y una vez hecho esto, introduce el c\u00f3digo que genera la aplicaci\u00f3n para verificar que est\u00e1 todo bien configurado. Una vez hecho esto, ya estar\u00e1 configurada correctamente la verificaci\u00f3n en dos pasos.</p>"},{"location":"trabajadores/verificacion-en-dos-pasos/#como-se-anaden-llaves-de-seguridad","title":"\u00bfC\u00f3mo se a\u00f1aden llaves de seguridad?","text":"<p>Para gestionar tus llaves de seguridad, haz clic en el bot\u00f3n Llaves de seguridad de la secci\u00f3n Seguridad. Aparecer\u00e1 una tabla con tus llaves que hayas configurado y la opci\u00f3n para borrarlas.</p> <p>Si haces clic en el bot\u00f3n add, podr\u00e1s a\u00f1adir una nueva llave de seguridad. En el di\u00e1logo que aparece, deber\u00e1s introducir el nombre que quieras dar a la llave de seguridad (para poder reconocerla despu\u00e9s en la tabla, en caso que tengas varias) y hacer clic en el bot\u00f3n Registrar. Luego, el navegador te guiar\u00e1 por el proceso de registro, y una vez terminado, la llave quedar\u00e1 registrada.</p>"},{"location":"trabajadores/verificacion-en-dos-pasos/#como-se-quita-la-verificacion-en-dos-pasos","title":"\u00bfC\u00f3mo se quita la verificaci\u00f3n en dos pasos?","text":"<p>Para quitar la verificaci\u00f3n en dos pasos, ve a la secci\u00f3n Seguridad y haz clic en Desactivar verificaci\u00f3n en 2 pasos. Por motivos de seguridad deber\u00e1s introducir tu contrase\u00f1a para realizar esta acci\u00f3n, y al hacer clic en Desactivar quedar\u00e1 desactivada. A partir de este punto ya podr\u00e1s desinstalar la aplicaci\u00f3n que genera c\u00f3digos de tu m\u00f3vil.</p>"},{"location":"trabajadores/verificacion-en-dos-pasos/#no-puedo-iniciar-sesion-por-culpa-de-la-verificacion-en-dos-pasos-que-hago","title":"No puedo iniciar sesi\u00f3n por culpa de la verificaci\u00f3n en dos pasos. \u00bfQu\u00e9 hago?","text":"<p>Si te has quedado bloqueado porque, por ejemplo, has perdido el m\u00f3vil o has desinstalado la aplicaci\u00f3n que genera c\u00f3digos, puedes pedir al administrador del aplicativo que te desactive la verificaci\u00f3n en dos pasos para poder iniciar sesi\u00f3n \u00fanicamente con la contrase\u00f1a. Luego, puedes volver a configurar la verificaci\u00f3n en dos pasos si lo deseas.</p>"}]}